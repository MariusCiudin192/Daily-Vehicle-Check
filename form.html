<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Vehicle Check Form</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <header>
        <h1>Daily Vehicle Check Form</h1>
    </header>
    <nav>
        <a href="index.html">Home</a>
        <a href="form.html">Driver Check Form</a>
        <a href="dashboard.html">Manager Dashboard</a>
        <a href="privacy.html">Privacy & Ethics</a>
    </nav>
    <div class="container">
        <p>Please complete the following checklist. Required fields are marked with <span style="color:red;">*</span>.</p>
        
        <div id="message"></div>

        <form id="inspectionForm" onsubmit="return false;">
            <label for="date">Date and time <span style="color:red;">*</span></label>
            <input type="datetime-local" id="date" name="date" required>

            <label for="driver">Driver name <span style="color:red;">*</span></label>
            <input type="text" id="driver" name="driver" placeholder="e.g. John Smith" required>

            <label for="vehicle">Vehicle registration <span style="color:red;">*</span></label>
            <input type="text" id="vehicle" name="vehicle" placeholder="e.g. AB12 CDE" required>

            <label for="odometer">Odometer reading (miles) <span style="color:red;">*</span></label>
            <input type="number" id="odometer" name="odometer" step="0.1" required>

            <label>Checklist Items <span style="color:red;">*</span></label>
            <div class="checklist">
                
                <div class="check-item">
                    <span>Lights</span>
                    <div class="buttons">
                        <button type="button" class="pass-button" onclick="selectStatus(this, 'lights', 'pass')">Pass</button>
                        <button type="button" class="fail-button" onclick="selectStatus(this, 'lights', 'fail')">Fail</button>
                        <input type="radio" name="lights" value="pass" style="display:none;">
                        <input type="radio" name="lights" value="fail" style="display:none;">
                    </div>
                </div>

                <div class="check-item">
                    <span>Brakes</span>
                    <div class="buttons">
                        <button type="button" class="pass-button" onclick="selectStatus(this, 'brakes', 'pass')">Pass</button>
                        <button type="button" class="fail-button" onclick="selectStatus(this, 'brakes', 'fail')">Fail</button>
                         <input type="radio" name="brakes" value="pass" style="display:none;">
                        <input type="radio" name="brakes" value="fail" style="display:none;">
                    </div>
                </div>

                <div class="check-item">
                    <span>Tyres</span>
                    <div class="buttons">
                        <button type="button" class="pass-button" onclick="selectStatus(this, 'tyres', 'pass')">Pass</button>
                        <button type="button" class="fail-button" onclick="selectStatus(this, 'tyres', 'fail')">Fail</button>
                        <input type="radio" name="tyres" value="pass" style="display:none;">
                        <input type="radio" name="tyres" value="fail" style="display:none;">
                    </div>
                </div>
                
                 </div>

            <label for="notes">Notes / Defects</label>
            <textarea id="notes" name="notes" rows="4" placeholder="Describe any issues for items marked as 'Fail'..."></textarea>

            <label for="photo">Upload a photo (optional)</label>
            <input type="file" id="photo" name="photo" accept="image/*">

            <button type="button" id="generateAndEmailBtn">Generate & Email Report</button>
        </form>
    </div>
    
    <script src="script.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js');
      }

      function selectStatus(buttonEl, itemName, status) {
        // Logica pentru a selecta statusul si a colora butoanele
        // Gaseste butoanele din acelasi grup
        const parent = buttonEl.parentElement;
        parent.querySelectorAll('button').forEach(btn => {
            btn.classList.remove('selected-pass', 'selected-fail');
        });

        // Gaseste input-ul radio ascuns si bifeaza-l
        const radioInput = parent.querySelector(`input[name="${itemName}"][value="${status}"]`);
        if(radioInput) radioInput.checked = true;

        // Adauga clasa de culoare
        if (status === 'pass') {
            buttonEl.classList.add('selected-pass');
        } else {
            buttonEl.classList.add('selected-fail');
        }
      }
    </script>
</body>
</html>
